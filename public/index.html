<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TrueTrend</title>
  <style>
    :root { --bg:#0b0f1a; --panel:#111526; --text:#e6eaff; --muted:#9aa4c9; --brand:#1a5cff; --line:#232846; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:16px/1.55 system-ui,Segoe UI,Roboto,Arial}
    .wrap{max-width:900px;margin:4rem auto;padding:2rem}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:24px}
    h1{margin:0 0 .5rem 0;font-size:clamp(22px,4vw,32px)}
    h2{margin:.5rem 0 1rem 0;font-size:clamp(18px,3vw,24px);color:var(--muted)}
    p{margin:.4rem 0 .9rem 0}
    a.btn{display:inline-block;background:var(--brand);color:#fff;text-decoration:none;padding:12px 18px;border-radius:10px;font-weight:700}
    .muted{color:var(--muted)}
    .sp{height:10px}
    .center{text-align:center}
    .hide{display:none}
    .footer {margin-top:2rem;color:var(--muted);font-size:14px}
    code{padding:.1rem .35rem;background:#0c1324;border-radius:6px}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- LANDING (shown by default) -->
    <section id="landing" class="card">
      <h1>TrueTrend — Learn • Earn • Own</h1>
      <h2 class="muted">Router-based trading assistant for clarity & consistency.</h2>
      <p>Click the button below to purchase. After payment you’ll be redirected back here and your installer will download automatically.</p>
      <!-- TODO: paste your real Stripe Payment Link URL below -->
      <p class="sp"></p>
      <a class="btn" id="pay" href="https://buy.stripe.com/your_payment_link_here" target="_blank" rel="noopener">Buy with Stripe</a>
      <div class="footer">
        <p>After payment redirect URL: <code>?thanks=1</code></p>
        <p class="muted">If you need a health check, open <code>/health.txt</code> (optional).</p>
      </div>
    </section>

    <!-- THANK-YOU / DOWNLOAD (shown when ?thanks=1 or ?session_id=) -->
    <section id="thanks" class="card hide">
      <h1>✅ Thanks for your purchase!</h1>
      <p>Your download should start automatically. If it doesn’t, click the button below.</p>
      <p class="sp"></p>
      <p><a class="btn" id="dl" href="/releases/TrueTrend_Universal_Chrome_Extension_v4.3.3.5.zip">Download now</a></p>
      <p class="muted">Tip: if the browser blocks the download, allow it and click the button again.</p>
      <div class="footer">Need help? Contact support@trytruetrend.com.</div>
    </section>

  </div>

  <script>
    // ===== CONFIG you can change =====
    const DOWNLOAD_URL = "/releases/TrueTrend_Universal_Chrome_Extension_v4.3.3.5.zip";
    // ===== nothing below here needs changing =====

    const params = new URLSearchParams(location.search);
    const isThanks = params.has("thanks") || params.has("session_id");

    const landing = document.getElementById("landing");
    const thanks  = document.getElementById("thanks");
    const dlBtn   = document.getElementById("dl");

    dlBtn.href = DOWNLOAD_URL;

    if (isThanks) {
      landing.classList.add("hide");
      thanks.classList.remove("hide");

      // Auto-start the download with a tiny delay (gives the page time to paint)
      setTimeout(() => {
        try {
          const a = document.createElement("a");
          a.href = DOWNLOAD_URL;
          a.download = "";
          document.body.appendChild(a);
          a.click();
          a.remove();
        } catch(_) {
          // ignore; user can click the visible button
        }
      }, 700);
    }
  </script>
</body>
</html>
